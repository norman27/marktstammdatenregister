version: "3.8"

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ..:/workspace
      - php-vendor:/workspace/server/vendor
      - php-var:/workspace/server/var
    command: sleep infinity
    environment:
      # php env
      EXPOSE_HOSTNAME: 0.0.0.0
      APP_ENV: 'dev'
      APP_DEBUG: '1'
      PHP_XDEBUG_ENABLED: 1
      XDEBUG_CONFIG: ${DEBUG_OPTIONS:-XDEBUG remote_enable=1 remote_connect_back=1}
      # js envs
      API_RESOURCE_BASE_URL: 'http://0.0.0.0:8081'
volumes:
  php-vendor:
  php-var:
